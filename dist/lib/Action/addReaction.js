"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=addReaction;var _client=require("@slack/client");function _asyncToGenerator(fn){return function(){var gen=fn.apply(this,arguments);return new Promise(function(resolve,reject){function step(key,arg){try{var info=gen[key](arg);var value=info.value;}catch(error){reject(error);return;}if(info.done){resolve(value);}else{return Promise.resolve(value).then(function(value){step("next",value);},function(err){step("throw",err);});}}return step("next");});};}function addReaction(reactionList,matchRegExp){let useAlreadyCalled=arguments.length>2&&arguments[2]!==undefined?arguments[2]:true;return{filter(message,entities,alreadyCalled){const type=message.type,subtype=message.subtype,text=message.text;if(type!==_client.RTM_EVENTS.MESSAGE)return false;if(subtype)return false;if(useAlreadyCalled&&alreadyCalled)return false;if(matchRegExp&&!matchRegExp.test(text))return false;return true;},action(message,entities,ownerClient,botClient){return _asyncToGenerator(function*(){const channel=message.channel,ts=message.ts;// リアクションを順次付与していく
for(const reaction of reactionList){yield botClient.reactions.add(reaction,{channel,timestamp:ts});}})();}};}module.exports=exports["default"];